{% extends 'base.html' %}

{% load static %}

{% block content %}

<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">
            <img src="{% static 'images/logo2.png' %}" alt="Avatar Logo" style="width:40px;" class="rounded-pill"> 
        </a>
        <ul class="navbar-nav me-auto">
            <li class="nav-item">
                <a class="nav-link active" href="profile">Profile</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="AllPosts">Popular posts</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="followedPosts">Posts by followed Users</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="intro">Log out</a>
            </li>
        </ul>

        <div class='searchSection'>
            <form method='post' action='search'>
                {% csrf_token %}
                    <input for='text' placeholder='search' class='searcher form-control' oninput="updateSearchButtons()" name='searchedFor'>
                    <input type = "hidden" id="userOrPost" name='userOrPost'>
            
        </div>
    </div>
</nav>




<div class="container mt-3">
    <div class="row">
        <div class="col-md-6 ms-auto me-0">
            <div class="d-flex flex-column align-items-end">
                <button id="searchPost" type="submit" onclick="postOrUser('post')" class="btn btn-secondary mb-2 d-none"></button>
                <button id="searchUser" type="submit" onclick="postOrUser('user')" class="btn btn-secondary d-none" ></button>
            </div>
        </div>
    </div>
</div>

</form>

    





<form method='post' action='profile' enctype="multipart/form-data">
    {% csrf_token %}

    <input type="hidden" name="replyCheck" value="False">
    
    <div class="d-flex justify-content-center align-items-center">
        <div class="form-floating col-md-6">
            <textarea class='form-control' rows="4" name='post' id="postbox" style="font-size:40px; width: 600px; height: 250px;" placeholder='Whats on your mind?'></textarea>
            <label for="postbox">Whats on your mind?</label>
        </div>
    </div>
    
    <input type="file" name="image" id="image" accept="image/*" style="display:none">

    <label for="image">
        <img src="{% static 'images/select.png' %}" alt="File Icon" style="width: 40px; height: 40px; margin-right: 5px%; position:absolute; left: 26%; top: 48%">
    </label>
    
    <button type='submit' id='spost' class="btn btn-primary" >Post</button>
    
    <input type="hidden" name="replyCheck" value="False">
</form>

<script>

    console.log("hello world")

    
    function updateSearchButtons() {
        currentSearch = document.querySelector(".searcher").value;
        document.getElementById("searchPost").innerHTML = `search for '${currentSearch}' in Posts'`;
        document.getElementById("searchUser").innerHTML = `search for '${currentSearch}' in Users'`;
        document.getElementById('searchPost').classList.remove('d-none');
        document.getElementById('searchUser').classList.remove('d-none');

        if (currentSearch.length == 0) {
            document.getElementById('searchPost').classList.add('d-none');
            document.getElementById('searchUser').classList.add('d-none');

        }

    }

    function postOrUser(x) {
        document.getElementById('userOrPost').value = x;
        console.log("pls be fixed")
        console.log(document.getElementById('userOrPost').value);

    }
    
    

</script>

    


{% endblock %}


